<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>NASA EarthData Access Utilities ‚Ä¢ earthdatalogin</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="NASA EarthData Access Utilities">
<meta name="description" content="Providing easy, portable access to NASA EarthData products through the use of bearer tokens. Much of NASAs public data catalogs hosted and maintained by its 12 Distributed Active Archive Centers (DAACs) are now made available on the Amazon Web Services S3 storage. However, accessing this data through the standard S3 API is restricted to only to compute resources running inside us-west-2 Data Center in Portland, Oregon, which allows NASA to avoid being charged data egress rates. This package provides public access to the data from any networked device by using the EarthData login application programming interface (API), &lt;https://www.earthdata.nasa.gov/eosdis/science-system-description/eosdis-components/earthdata-login&gt;, providing convenient authentication and access to cloud-hosted NASA EarthData products. This makes access to a wide range of earth observation data from any location straight forward and compatible with R packages that are widely used with cloud native earth observation data (such as terra, sf', etc.)">
<meta property="og:description" content="Providing easy, portable access to NASA EarthData products through the use of bearer tokens. Much of NASAs public data catalogs hosted and maintained by its 12 Distributed Active Archive Centers (DAACs) are now made available on the Amazon Web Services S3 storage. However, accessing this data through the standard S3 API is restricted to only to compute resources running inside us-west-2 Data Center in Portland, Oregon, which allows NASA to avoid being charged data egress rates. This package provides public access to the data from any networked device by using the EarthData login application programming interface (API), &lt;https://www.earthdata.nasa.gov/eosdis/science-system-description/eosdis-components/earthdata-login&gt;, providing convenient authentication and access to cloud-hosted NASA EarthData products. This makes access to a wide range of earth observation data from any location straight forward and compatible with R packages that are widely used with cloud native earth observation data (such as terra, sf', etc.)">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">earthdatalogin</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2.99</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/data-formats.html">Data Formats</a></li>
    <li><a class="dropdown-item" href="articles/gdalcubes-stac-cog.html">Data Cubes with STAC</a></li>
    <li><a class="dropdown-item" href="articles/legacy-formats.html">Legacy data formats with cloud tools</a></li>
    <li><a class="dropdown-item" href="articles/motivations.html">Motivations: What is Cloud-Native Access Anyway?</a></li>
    <li><a class="dropdown-item" href="articles/non-egressed.html">Access within AWS Compute</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/boettiger-lab/earthdatalogin/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="earthdatalogin-artificial_satellite-earth_asia">earthdatalogin <span class="emoji" data-emoji="artificial_satellite">üõ∞Ô∏è</span> <span class="emoji" data-emoji="earth_asia">üåè</span>
<a class="anchor" aria-label="anchor" href="#earthdatalogin-artificial_satellite-earth_asia"></a>
</h1></div>
<!-- badges: start -->

<p><code>earthdatalogin</code> seeks to streamline the process of accessing NASA data from the Earth Data cloud program <em>from anywhere</em>. Because Amazon Web Services (AWS) typically charges egress fees whenever network traffic leaves the data center which hosts it, NASA has restricted access to its data hosted by Amazon to only be accessible from AWS servers running in the same data center (<code>us-west-2</code>) when using the S3 access protocol. However, NASA also makes this cloud data available publicly to any machine using a standard HTTPS connection. Both cases require requesting and managing credentials tied to a registered user name. This package merely makes that process easier.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><code>earthdatalogin</code> is now on CRAN, and can simply be installed with</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"earthdatalogin"</span><span class="op">)</span></span></code></pre></div>
<p>Or you can install the development version of <code>earthdatalogin</code> from <a href="https://github.com/" class="external-link">GitHub</a>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"boettiger-lab/earthdatalogin"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>Access to EarthData is free, but users are required to <a href="https://urs.earthdata.nasa.gov/home" class="external-link">register</a>. Currently, <code>earthdatalogin</code> provides it‚Äôs own default credentials for a quick start. Users are still encouraged to <strong><a href="https://urs.earthdata.nasa.gov/home" class="external-link">register</a></strong> their own credentials!</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://boettiger-lab.github.io/earthdatalogin/">earthdatalogin</a></span><span class="op">)</span></span></code></pre></div>
<p>The easiest and most portable method of access is using the netrc basic authentication protocol for HTTP. Call <code><a href="reference/edl_netrc.html">edl_netrc()</a></code> to set this up given your username and password (passed as optional arguments or read from the environmental variables. If neither provides credentials, <code>earthdatalogin</code> will provide it‚Äôs own credentials, but you may experience rate limits more readily):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/edl_netrc.html">edl_netrc</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>If <code><a href="reference/edl_netrc.html">edl_netrc()</a></code> has been called, then most existing spatial data packages in R can then seamlessly access NASA Earthdata over HTTP links.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">url</span> <span class="op">&lt;-</span> <span class="st">"https://data.lpdaac.earthdatacloud.nasa.gov/lp-prod-protected/HLSL30.020/HLS.L30.T56JKT.2023246T235950.v2.0/HLS.L30.T56JKT.2023246T235950.v2.0.SAA.tif"</span></span>
<span></span>
<span><span class="fu">terra</span><span class="fu">::</span><span class="fu"><a href="https://rspatial.github.io/terra/reference/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">url</span>, vsi<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; class       : SpatRaster </span></span>
<span><span class="co">#&gt; dimensions  : 3660, 3660, 1  (nrow, ncol, nlyr)</span></span>
<span><span class="co">#&gt; resolution  : 30, 30  (x, y)</span></span>
<span><span class="co">#&gt; extent      : 199980, 309780, 7190200, 7300000  (xmin, xmax, ymin, ymax)</span></span>
<span><span class="co">#&gt; coord. ref. : WGS 84 / UTM zone 56N (EPSG:32656) </span></span>
<span><span class="co">#&gt; source      : HLS.L30.T56JKT.2023246T235950.v2.0.SAA.tif </span></span>
<span><span class="co">#&gt; name        : HLS.L30.T56JKT.2023246T235950.v2.0.SAA</span></span></code></pre></div>
<p>Note that no special <code>earthdatalogin</code> functions are needed in the rest of our code. This is important as it lets the user take advantage of any existing R packages or tutorials without modification, as if there was no authentication barrier to NASA EarthData in the first place. If we had not called <code><a href="reference/edl_netrc.html">edl_netrc()</a></code> for authentication, this would throw an error that the file does not exist. This call needs be made only once per session (i.e.¬†at the start of a script.)</p>
</div>
<div class="section level2">
<h2 id="how-does-it-work">How does it work?<a class="anchor" aria-label="anchor" href="#how-does-it-work"></a>
</h2>
<p>Most R packages (<code>terra</code>, <code>sf</code>, <code>stars</code>, and others) access spatial data by using an underlying C++ library called GDAL.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Some R users have heard that the &lt;code&gt;rgdal&lt;/code&gt; package is being deprecated. Don‚Äôt confuse this with the GDAL C++ library being deprecated ‚Äì &lt;code&gt;rgdal&lt;/code&gt; was only one of many R packages that used the GDAL C++ libraries, and was deprecated in favor of the same bindings to GDAL being available in &lt;code&gt;sf&lt;/code&gt;.&lt;/p&gt;"><sup>1</sup></a> GDAL is also used under the hood of many other spatial tools, from Python (<code>geopandas</code>, <code>rasterio</code>, others) to QGIS and Google Earth Engine. <code>earthdatalogin</code> sets a collection of config files and environmental variables used by GDAL to allow it to access authentication credentials. Crucially, the use of <code>netrc</code>-based authentication works just as well if you are running from a laptop or if you are running from inside AWS compute in <code>us-west-2</code> ‚Äì such as using the popular Openscapes 2i2c hub. This portability does not hold for other mechanisms, such as S3-based login, which in the case of NASA EarthData only works from inside AWS-based compute, and not true of the bearer token mechanism, which only works from <em>outside</em> AWS-based compute. The <code>earthdatalogin</code> package does provide functions for using these other authentication mechanisms (see <code><a href="reference/edl_s3_token.html">edl_s3_token()</a></code> and <code><a href="reference/edl_set_token.html">edl_set_token()</a></code>), but discourages their use as they are less portable while offering no performance advantage.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;NASA‚Äôs own documentation often points users to the S3-based access protocol when working on AWS compute. Note that the S3 tokens NASA‚Äôs AWS setup provides expire every hour, and are specific to each DAAC, making it very difficult for users to work across data products from multiple DAACs in a single workflow. Note also that this authentication mechanism provides essentially no advantage in terms of speed or cost to the user or to NASA, especially for large data.&lt;/p&gt;"><sup>2</sup></a></p>
<p>This function takes care of managing tokens for you. If you don‚Äôt have any tokens, it will request one be minted. If your user name has tokens already, it will look them up and re-use them. (EDL will issue at most two tokens per user, and tokens expire after 6 month, but users shouldn‚Äôt need to worry about this since <code><a href="reference/edl_set_token.html">edl_set_token()</a></code> handles it). This function will also set the token in as a GDAL environmental variable. This means that popular R packages such as <code>terra</code>, <code>sf</code> or <code>stars</code> that all involve bindings to GDAL will automatically be able to utilize this token for any operations reading from HTTPS (using the <code>vsicurl</code> prefix).</p>
</div>
<div class="section level2">
<h2 id="cloud-native-workflows">Cloud native workflows<a class="anchor" aria-label="anchor" href="#cloud-native-workflows"></a>
</h2>
<p>Because NASA EarthData is also the first introduction to cloud-hosted data for many researchers, the fact that NASA tries to minimize egress charges by restricting S3 access to requests coming from AWS <code>us-west-2</code> compute center this sometimes gives the false impression that accessing data ‚Äúfrom the cloud‚Äù <em>requires</em> also paying Amazon Web Services for compute time. This is entirely spurious. For instance, <a href="https://registry.opendata.aws/collab/noaa/" class="external-link">NOAA also provides</a> an extensive set of regularly updated data products on AWS without this restriction, which can be accessed over a standard HTTPS connection or using the S3 protocol as an anonymous user (with no keys or tokens). To maximize performance, heavy users of NOAA data will frequently choose to access that data from AWS compute in the same region (mostly <code>us-east-1</code> for NOAA), but this is not required. Technically speaking, we frequently use the vernacular phrase of ‚Äúaccessing cloud data‚Äù to refer to network based access of data using <strong>HTTP range requests</strong> ‚Äì the ability to ask a web server to transfer some range of bytes from an individual file rather than transferring the entire file across the network.</p>
<p>Note that we can now successfully access this file over https from any machine with an internet connection, and with no further authentication steps. That URL could have been obtained in a variety of ways, including <a href="https://search.earthdata.nasa.gov/search" class="external-link uri">https://search.earthdata.nasa.gov/search</a>, searching individual DAACs, or programmatically using the EarthData STAC catalog. The point here is that despite the barrier of <code>earthdatalogin</code>, the R code required for cloud-native access is now matches the standard strategies we would use for cloud-native access of any other data source.</p>
<p>A key feature that makes ‚Äòcloud native‚Äô access fast is that this access is <em>lazy</em>. All though these individual files could be quite large, our request has not downloaded the entire file ‚Äì it has instead used its knowledge of spatial data formats to read just those bytes of the file that provide critical metadata such as extent, projection, bands and coordinate ranges. Using that information, we can extract just the bits of data (locations, variables) we care about without having to download everything else as well. This saves the RAM on our computer, and drive space on our disks, as well as speeding up download. Without these techniques, processing the massive amounts of data coming from modern earth observation methods would be impractical.</p>
<p><em>However</em>, not all data formats are equally amenable to this approach. Requesting a few bytes from a file across hundreds of miles of network connection is not the same thing as requesting a few bytes across the six inches of PCI connection between your processor and your hard-drive. More recent formats like ‚ÄúCloud Optimized Geotiff‚Äù (COG) files are, as the name suggests, optimized for this. Complex older formats like HDF5 or GRIB are much less efficient. Network based range requests are not possible on some older (but still widely used) formats, like HDF4. In this last case, we will need to download the file to a local disk (a POSIX filesystem, not a hyperscale Object Store) to read it. Use <code><a href="reference/edl_download.html">edl_download()</a></code> to handle authenticated downloads in this case.</p>
</div>
<div class="section level2">
<h2 id="vignettes">Vignettes<a class="anchor" aria-label="anchor" href="#vignettes"></a>
</h2>
<p>To facilitate cloud-native access of NASA EarthData from R, this package also includes a series of vignettes illustrating the use of some popular R packages in there (often less well-known) cloud-native modes. In each of these vignettes, we will take care to leverage ‚Äúlazy evaluation‚Äù to avoid downloading more than we have to. With the exception of the vignette on S3 access from within <code>us-west-2</code>, these vignettes should run most anywhere, but will be most effective on machines with fast network access. Many university networks, and any cloud-hosted platform, such as GitHub Codespaces, offer excellent network performance for this purpose.</p>
</div>
</div>


  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=earthdatalogin" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/boettiger-lab/earthdatalogin/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/boettiger-lab/earthdatalogin/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing earthdatalogin</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://carlboettiger.info" class="external-link">Carl Boettiger</a> <br><small class="roles"> Author, maintainer, copyright holder </small> <a href="https://orcid.org/0000-0002-1642-628X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>
<a href="https://betolink.dev" class="external-link">Luis L√≥pez</a> <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0003-4896-3263" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>
<a href="http://yuvi.in" class="external-link">Yuvi Panda</a> <br><small class="roles"> Author </small>   </li>
<li>Bri Lind <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-5306-9963" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>
<a href="https://openscapes.org" class="external-link"><img src="https://nasa-openscapes.github.io/images/nasa-openscapes.png" alt="Openscapes" height="32" style="margin-bottom: 3px;"></a> <br><small class="roles"> Funder </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/boettiger-lab/earthdatalogin/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/boettiger-lab/earthdatalogin/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://carlboettiger.info" class="external-link">Carl Boettiger</a>, <a href="https://betolink.dev" class="external-link">Luis L√≥pez</a>, <a href="http://yuvi.in" class="external-link">Yuvi Panda</a>, Bri Lind, <a href="https://openscapes.org" class="external-link"><img src="https://nasa-openscapes.github.io/images/nasa-openscapes.png" alt="Openscapes" height="32" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
